(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2116],{419:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9687).A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},1115:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9687).A)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]])},2394:(e,t,r)=>{Promise.resolve().then(r.bind(r,9318))},2568:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9687).A)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]])},2883:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>i,Rz:()=>l,c4:()=>n,pq:()=>o});var a=r(1208);let s=a.A.create({baseURL:"/api",headers:{"Content-Type":"application/json"},withCredentials:!0});function n(){return localStorage.getItem("campusride_access_token")}function l(e,t){localStorage.setItem("campusride_access_token",e),t&&localStorage.setItem("campusride_refresh_token",t)}s.interceptors.request.use(e=>{if(e.url&&e.url.startsWith("http")){let t=new URL(e.url);e.url=t.pathname}e.baseURL="/api";let t=n();return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),s.interceptors.response.use(e=>e,e=>{var t;return(null==(t=e.response)?void 0:t.status)===401&&(localStorage.removeItem("campusride_access_token"),localStorage.removeItem("campusride_refresh_token"),window.location.href="/auth/login"),Promise.reject(e)});let o={login:async(e,t)=>{let r=window.location.origin,s="".concat(r,"/api/auth/login");console.log("\uD83D\uDD35 Login API URL:",s),console.log("\uD83D\uDD35 Current origin:",r);let n=await a.A.post(s,{email:e,password:t},{headers:{"Content-Type":"application/json"}});return{access:n.data.access,refresh:n.data.refresh,user:n.data.user||{}}},register:async e=>{let t=window.location.origin;return(await a.A.post("".concat(t,"/api/auth/register"),e,{headers:{"Content-Type":"application/json"}})).data}},i=s},4560:(e,t,r)=>{"use strict";r.d(t,{D:()=>d,N:()=>c});var a=r(7620),s=(e,t,r,a,s,n,l,o)=>{let i=document.documentElement,d=["light","dark"];function c(t){var r;(Array.isArray(e)?e:[e]).forEach(e=>{let r="class"===e,a=r&&n?s.map(e=>n[e]||e):s;r?(i.classList.remove(...a),i.classList.add(n&&n[t]?n[t]:t)):i.setAttribute(e,t)}),r=t,o&&d.includes(r)&&(i.style.colorScheme=r)}if(a)c(a);else try{let e=localStorage.getItem(t)||r,a=l&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;c(a)}catch(e){}},n=["light","dark"],l="(prefers-color-scheme: dark)",o=a.createContext(void 0),i={setTheme:e=>{},themes:[]},d=()=>{var e;return null!=(e=a.useContext(o))?e:i},c=e=>a.useContext(o)?a.createElement(a.Fragment,null,e.children):a.createElement(u,{...e}),m=["light","dark"],u=e=>{let{forcedTheme:t,disableTransitionOnChange:r=!1,enableSystem:s=!0,enableColorScheme:i=!0,storageKey:d="theme",themes:c=m,defaultTheme:u=s?"system":"light",attribute:x="data-theme",value:b,children:f,nonce:k,scriptProps:v}=e,[w,j]=a.useState(()=>g(d,u)),[N,S]=a.useState(()=>"system"===w?y():w),C=b?Object.values(b):c,A=a.useCallback(e=>{let t=e;if(!t)return;"system"===e&&s&&(t=y());let a=b?b[t]:t,l=r?p(k):null,o=document.documentElement,d=e=>{"class"===e?(o.classList.remove(...C),a&&o.classList.add(a)):e.startsWith("data-")&&(a?o.setAttribute(e,a):o.removeAttribute(e))};if(Array.isArray(x)?x.forEach(d):d(x),i){let e=n.includes(u)?u:null,r=n.includes(t)?t:e;o.style.colorScheme=r}null==l||l()},[k]),E=a.useCallback(e=>{let t="function"==typeof e?e(w):e;j(t);try{localStorage.setItem(d,t)}catch(e){}},[w]),L=a.useCallback(e=>{S(y(e)),"system"===w&&s&&!t&&A("system")},[w,t]);a.useEffect(()=>{let e=window.matchMedia(l);return e.addListener(L),L(e),()=>e.removeListener(L)},[L]),a.useEffect(()=>{let e=e=>{e.key===d&&(e.newValue?j(e.newValue):E(u))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[E]),a.useEffect(()=>{A(null!=t?t:w)},[t,w]);let T=a.useMemo(()=>({theme:w,setTheme:E,forcedTheme:t,resolvedTheme:"system"===w?N:w,themes:s?[...c,"system"]:c,systemTheme:s?N:void 0}),[w,E,t,N,s,c]);return a.createElement(o.Provider,{value:T},a.createElement(h,{forcedTheme:t,storageKey:d,attribute:x,enableSystem:s,enableColorScheme:i,defaultTheme:u,value:b,themes:c,nonce:k,scriptProps:v}),f)},h=a.memo(e=>{let{forcedTheme:t,storageKey:r,attribute:n,enableSystem:l,enableColorScheme:o,defaultTheme:i,value:d,themes:c,nonce:m,scriptProps:u}=e,h=JSON.stringify([n,r,i,t,c,d,l,o]).slice(1,-1);return a.createElement("script",{...u,suppressHydrationWarning:!0,nonce:"",dangerouslySetInnerHTML:{__html:"(".concat(s.toString(),")(").concat(h,")")}})}),g=(e,t)=>{let r;try{r=localStorage.getItem(e)||void 0}catch(e){}return r||t},p=e=>{let t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},y=e=>(e||(e=window.matchMedia(l)),e.matches?"dark":"light")},9318:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var a=r(4568),s=r(9664),n=r.n(s),l=r(7620),o=r(7541),i=r(2883),d=r(2568),c=r(1115),m=r(419),u=r(4560);function h(){let e=(0,o.useRouter)(),[t,r]=(0,l.useState)(""),[s,h]=(0,l.useState)(""),[g,p]=(0,l.useState)(!1),[y,x]=(0,l.useState)(null),[b,f]=(0,l.useState)(!1),{theme:k,setTheme:v}=(0,u.D)();(0,l.useEffect)(()=>{f(!0)},[]);let w=async r=>{if(r.preventDefault(),p(!0),x(null),!t||!s){x("Please enter both email/phone and password"),p(!1);return}try{let r=await i.pq.login(t,s);if(r.access){(0,i.Rz)(r.access,r.refresh);let t=(r.user||{}).user_type||"customer";if("admin"!==t){x("This login is only for administrators. Please use the regular login page."),p(!1);return}e.push("/admin/dashboard")}else x("Login failed. Please try again.")}catch(e){var a,n;x((null==(n=e.response)||null==(a=n.data)?void 0:a.detail)||e.message||"Invalid credentials. Please check your email/phone and password.")}finally{p(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-white dark:bg-black",children:[(0,a.jsx)("nav",{className:"sticky top-0 z-50 border-b border-gray-200 dark:border-gray-800 bg-white/80 dark:bg-black/80 backdrop-blur-sm",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(n(),{href:"/",children:(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Campus Ride"})}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[b&&(0,a.jsx)("button",{onClick:()=>v("dark"===k?"light":"dark"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors rounded-lg","aria-label":"Toggle theme",children:"dark"===k?(0,a.jsx)(d.A,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}):(0,a.jsx)(c.A,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),(0,a.jsx)(n(),{href:"/auth/login",className:"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white font-medium px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:"Regular Login"})]})]})})}),(0,a.jsx)("div",{className:"flex items-center justify-center px-4 py-16",children:(0,a.jsxs)("div",{className:"w-full max-w-md border border-gray-200 dark:border-gray-800 p-8 bg-white dark:bg-gray-900 rounded-2xl shadow-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,a.jsx)("div",{className:"p-2 bg-red-100 dark:bg-red-900/20 rounded-lg",children:(0,a.jsx)(m.A,{className:"w-6 h-6 text-red-600"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Admin Login"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:"Secure access for Campus Ride administrators only"}),(0,a.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Email or Phone"}),(0,a.jsx)("input",{type:"text",value:t,onChange:e=>r(e.target.value),placeholder:"Enter admin email or phone number",required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-950 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Password"}),(0,a.jsx)("input",{type:"password",value:s,onChange:e=>h(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-950 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),y&&(0,a.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:y}),(0,a.jsx)("button",{type:"submit",disabled:g,className:"w-full px-4 py-2 bg-red-600 dark:bg-red-700 text-white rounded-lg hover:opacity-90 transition-opacity disabled:opacity-50",children:g?"Signing in...":"Sign in as Admin"})]}),(0,a.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-800",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 text-center",children:["Need regular access?"," ",(0,a.jsx)(n(),{href:"/auth/login",className:"underline hover:text-gray-900 dark:hover:text-white",children:"Go to regular login"})]})})]})})]})}},9687:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(7620);let s=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:l=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:d="",children:c,iconNode:m,...u}=e;return(0,a.createElement)("svg",{ref:t,...n,width:l,height:l,stroke:r,strokeWidth:i?24*Number(o)/Number(l):o,className:s("lucide",d),...u},[...m.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),o=(e,t)=>{let r=(0,a.forwardRef)((r,n)=>{let{className:o,...i}=r;return(0,a.createElement)(l,{ref:n,iconNode:t,className:s("lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),o),...i})});return r.displayName="".concat(e),r}}},e=>{e.O(0,[9664,5324,587,18,7358],()=>e(e.s=2394)),_N_E=e.O()}]);