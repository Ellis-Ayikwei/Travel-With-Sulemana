(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{619:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,3210,23)),Promise.resolve().then(r.bind(r,6350))},2203:(e,t,r)=>{"use strict";let o;r.d(t,{A:()=>a,O:()=>s});var n=r(7620);try{o=r(122)}catch(e){o={}}function a(){let e=null,t=null,r=null,a=null;try{o.useSignIn&&(e=o.useSignIn()),o.useSignOut&&(t=o.useSignOut()),o.useAuthUser&&(r=o.useAuthUser()),o.useIsAuthenticated&&(a=o.useIsAuthenticated())}catch(e){console.error("Error initializing react-auth-kit hooks",e)}let[s,i]=(0,n.useState)(null),[l,c]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let e=()=>{let e=(()=>{try{if(r&&"function"==typeof r)return r();{let e=localStorage.getItem("campusride_access_token");if(e)try{let t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(atob(t).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join("")),o=JSON.parse(r);return{id:o.id,email:o.email,first_name:"",last_name:"",user_type:o.user_type}}catch(e){}}}catch(e){console.error("Error getting user",e)}return null})(),t=(()=>{try{if(a&&"function"==typeof a)return a();return!!localStorage.getItem("campusride_access_token")}catch(e){console.error("Error checking authentication",e)}return!1})();i(e),c(t)};e();let t=setInterval(e,2e3),o=()=>{e()};return window.addEventListener("storage",o),()=>{clearInterval(t),window.removeEventListener("storage",o)}},[r,a]),{user:s,isAuthenticated:l,isLoading:!1,login:(t,r,o)=>{localStorage.setItem("campusride_access_token",t),r&&localStorage.setItem("campusride_refresh_token",r);let n=o||null;if(!n)try{let e=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(atob(e).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join("")),o=JSON.parse(r);n={id:o.id,email:o.email,first_name:"",last_name:"",user_type:o.user_type}}catch(e){console.error("Failed to decode token",e);return}if(e&&"function"==typeof e)try{e({token:t,expiresIn:604800,tokenType:"Bearer",authState:n})&&(i(n),c(!0))}catch(e){console.error("Failed to sign in with react-auth-kit",e)}else i(n),c(!0)},logout:()=>{if(localStorage.removeItem("campusride_access_token"),localStorage.removeItem("campusride_refresh_token"),t&&"function"==typeof t)try{t()}catch(e){console.error("Failed to sign out with react-auth-kit",e)}i(null),c(!1)},refreshUser:async()=>Promise.resolve()}}let s=o.AuthProvider||(e=>e.children)},3210:()=>{},6350:(e,t,r)=>{"use strict";r.d(t,{Providers:()=>c});var o=r(4568),n=r(5970),a=r(4869),s=r(4560),i=r(7620),l=r(2203);function c(e){let{children:t}=e,[r]=(0,i.useState)(()=>new n.E({defaultOptions:{queries:{staleTime:6e4,refetchOnWindowFocus:!1}}}));return(0,o.jsx)(a.Ht,{client:r,children:(0,o.jsx)(s.N,{attribute:"class",defaultTheme:"dark",enableSystem:!1,children:(0,o.jsx)(l.O,{authType:"localstorage",authName:"_auth",cookieDomain:window.location.hostname,cookieSecure:!1,children:t})})})}}},e=>{e.O(0,[9857,122,9553,587,18,7358],()=>e(e.s=619)),_N_E=e.O()}]);