(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2778],{2883:(e,r,a)=>{"use strict";a.d(r,{Ay:()=>i,Rz:()=>n,c4:()=>l,pq:()=>d});var t=a(1208);let s=t.A.create({baseURL:"/api",headers:{"Content-Type":"application/json"},withCredentials:!0});function l(){return localStorage.getItem("campusride_access_token")}function n(e,r){localStorage.setItem("campusride_access_token",e),r&&localStorage.setItem("campusride_refresh_token",r)}s.interceptors.request.use(e=>{if(e.url&&e.url.startsWith("http")){let r=new URL(e.url);e.url=r.pathname}e.baseURL="/api";let r=l();return r&&(e.headers.Authorization="Bearer ".concat(r)),e},e=>Promise.reject(e)),s.interceptors.response.use(e=>e,e=>{var r;return(null==(r=e.response)?void 0:r.status)===401&&(localStorage.removeItem("campusride_access_token"),localStorage.removeItem("campusride_refresh_token"),window.location.href="/auth/login"),Promise.reject(e)});let d={login:async(e,r)=>{let a=window.location.origin,s="".concat(a,"/api/auth/login");console.log("\uD83D\uDD35 Login API URL:",s),console.log("\uD83D\uDD35 Current origin:",a);let l=await t.A.post(s,{email:e,password:r},{headers:{"Content-Type":"application/json"}});return{access:l.data.access,refresh:l.data.refresh,user:l.data.user||{}}},register:async e=>{let r=window.location.origin;return(await t.A.post("".concat(r,"/api/auth/register"),e,{headers:{"Content-Type":"application/json"}})).data}},i=s},4620:(e,r,a)=>{Promise.resolve().then(a.bind(a,9332))},9332:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>o});var t=a(4568),s=a(9664),l=a.n(s),n=a(7620),d=a(7541),i=a(2883);function o(){let e=(0,d.useRouter)(),[r,a]=(0,n.useState)({first_name:"",last_name:"",email:"",phone:"",password:""}),[s,o]=(0,n.useState)(!1),[c,g]=(0,n.useState)(null),[u,h]=(0,n.useState)(!1),m=async a=>{if(a.preventDefault(),o(!0),g(null),h(!1),!r.first_name||!r.last_name||!r.email||!r.password){g("Please fill in all required fields"),o(!1);return}if(r.password.length<6){g("Password must be at least 6 characters"),o(!1);return}try{await i.pq.register({email:r.email,phone:r.phone||"",first_name:r.first_name,last_name:r.last_name,password:r.password,user_type:"customer"}),h(!0),setTimeout(()=>{e.push("/auth/login")},1500)}catch(e){var t,s;g((null==(s=e.response)||null==(t=s.data)?void 0:t.detail)||e.message||"Registration failed. Please try again.")}finally{o(!1)}};return(0,t.jsxs)("div",{className:"min-h-screen bg-white dark:bg-black",children:[(0,t.jsx)("nav",{className:"sticky top-0 z-50 border-b border-gray-200 dark:border-gray-800 bg-white/80 dark:bg-black/80 backdrop-blur-sm",children:(0,t.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(l(),{href:"/",children:(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Campus Ride"})}),(0,t.jsx)(l(),{href:"/",className:"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white font-medium px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:"Back to Home"})]})})}),(0,t.jsx)("div",{className:"flex items-center justify-center px-4 py-16",children:(0,t.jsxs)("div",{className:"w-full max-w-md border border-gray-200 dark:border-gray-800 p-8 bg-white dark:bg-gray-900 rounded-2xl shadow-lg",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-6 text-gray-900 dark:text-white",children:"Create account"}),(0,t.jsxs)("form",{onSubmit:m,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:"First name"}),(0,t.jsx)("input",{value:r.first_name,onChange:e=>a({...r,first_name:e.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-950 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Last name"}),(0,t.jsx)("input",{value:r.last_name,onChange:e=>a({...r,last_name:e.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-950 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Email"}),(0,t.jsx)("input",{type:"email",value:r.email,onChange:e=>a({...r,email:e.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-950 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Phone Number"}),(0,t.jsx)("input",{type:"tel",value:r.phone,onChange:e=>a({...r,phone:e.target.value}),placeholder:"+233 XX XXX XXXX",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-950 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Password"}),(0,t.jsx)("input",{type:"password",value:r.password,onChange:e=>a({...r,password:e.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-950 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),c&&(0,t.jsx)("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:(0,t.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:c})}),u&&(0,t.jsx)("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:(0,t.jsx)("p",{className:"text-sm text-green-600 dark:text-green-400",children:"Account created successfully! Redirecting to login..."})}),(0,t.jsx)("button",{type:"submit",disabled:s||u,className:"w-full px-4 py-2 bg-gray-900 dark:bg-white text-white dark:text-gray-900 rounded-lg hover:opacity-90 transition-opacity disabled:opacity-50",children:s?"Creating...":u?"Account Created!":"Create account"})]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-4",children:["Already have an account? ",(0,t.jsx)(l(),{href:"/auth/login",className:"underline hover:text-gray-900 dark:hover:text-white",children:"Sign in"})]})]})})]})}}},e=>{e.O(0,[9664,5324,587,18,7358],()=>e(e.s=4620)),_N_E=e.O()}]);